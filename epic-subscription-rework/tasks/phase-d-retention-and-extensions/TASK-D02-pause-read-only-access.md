# TASK-D02: Pause â€” read-only Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ğ¾Ğ¼Ñƒ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ñƒ

## Meta

| ĞŸĞ¾Ğ»Ğµ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|----------|
| ID | TASK-D02 |
| Title | Read-only Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğ¼ ÑƒÑ€Ğ¾ĞºĞ°Ğ¼ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ğ°ÑƒĞ·Ñ‹ |
| Phase | D â€” Retention |
| Type | Backend / Frontend |
| Priority | P1 |
| Estimate | M (3 Ğ´Ğ½Ñ) |
| Owner Role | Fullstack Developer |

---

## Goal / Why

Ğ’Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ğ°ÑƒĞ·Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ ÑĞ²ÑĞ·ÑŒ Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ¾Ğ¹: Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğµ ÑƒÑ€Ğ¾ĞºĞ¸, ÑĞ²Ğ¾Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ, Ğ·Ğ°Ğ¼ĞµÑ‚ĞºĞ¸. Ğ­Ñ‚Ğ¾ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞ°ĞµÑ‚ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ. ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° ÑĞ½Ğ¸Ğ¶Ğ°ĞµÑ‚ Ğ¼Ğ¾Ñ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ.

---

## Scope

- Backend: AccessService â€” read-only mode Ğ´Ğ»Ñ PAUSED status
- Frontend: Ğ±Ğ°Ğ½Ğ½ĞµÑ€ Â«ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ¿Ğ°ÑƒĞ·ĞµÂ» Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
- Ğ Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¾: Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ‚ĞµĞ¾Ñ€Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ñ… ÑƒÑ€Ğ¾ĞºĞ¾Ğ², ÑĞ²Ğ¾Ğ¸Ñ… Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹
- Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾: Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑƒÑ€Ğ¾ĞºĞ¸, ÑĞ´Ğ°Ñ‡Ğ° Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğ¹, Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ²
- Ğ›Ğš: pause state UI

## Out of Scope

- Pause backend (D01)
- Pause emails (D05)

---

## Dependencies

| Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ | Ğ¢Ğ¸Ğ¿ |
|-------------|-----|
| TASK-D01 | Pause backend |

---

## Detailed Implementation Notes

### AccessService Extension

```ruby
class AccessService
  def self.can_access_lesson?(user, lesson)
    subscription = user.active_subscription

    case subscription&.status
    when 'active', 'trial', 'grace_period'
      lesson.available_in_subscription?
    when 'paused'
      # Read-only Ğº Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğ¼
      user.completed_lesson?(lesson) || user.started_lesson?(lesson)
    when 'cancelled'
      # ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğ´Ğ¾ ĞºĞ¾Ğ½Ñ†Ğ° Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ°
      subscription.current_period_end > Time.current && lesson.available_in_subscription?
    else
      false
    end
  end

  def self.can_submit_assignment?(user, lesson)
    subscription = user.active_subscription
    return false if subscription&.status == 'paused'
    can_access_lesson?(user, lesson)
  end

  def self.can_start_new_skill?(user)
    subscription = user.active_subscription
    subscription&.status.in?(%w[active trial grace_period]) ||
      (subscription&.status == 'cancelled' && subscription.current_period_end > Time.current)
  end
end
```

### Frontend: Pause Banner

ĞĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° Ğ¿Ñ€Ğ¸ status=paused:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â¸ ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ¿Ğ°ÑƒĞ·Ğµ. Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğµ     â”‚
â”‚   ÑƒÑ€Ğ¾ĞºĞ¸. Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ.     â”‚
â”‚   [ Ğ’Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ]                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğº (Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğ¹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”’ Ğ­Ñ‚Ğ¾Ñ‚ ÑƒÑ€Ğ¾Ğº Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ğ°ÑƒĞ·Ñ‹                      â”‚
â”‚    Ğ’Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ.         â”‚
â”‚    [ Ğ’Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ ]                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ›Ğš: Paused State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° Ğ½Ğ° Ğ¿Ğ°ÑƒĞ·Ğµ Ğ´Ğ¾ DD.MM.YYYY                 â”‚
â”‚                                                  â”‚
â”‚  Ğ’Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğµ ÑƒÑ€Ğ¾ĞºĞ¸.       â”‚
â”‚  Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ²Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ.  â”‚
â”‚                                                  â”‚
â”‚  Ğ’Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ:                                   â”‚
â”‚  âœ“ 23 ÑƒÑ€Ğ¾ĞºĞ° Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ¾                             â”‚
â”‚  âŸ³ 2 Ğ½Ğ°Ğ²Ñ‹ĞºĞ° Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ                           â”‚
â”‚                                                  â”‚
â”‚  [ Ğ’Ğ¾Ğ·Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ ]                          â”‚
â”‚  [ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºÑƒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ ]                 â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Acceptance Criteria

- **Given** paused Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°, **When** Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğº, **Then** Ñ‚ĞµĞ¾Ñ€Ğ¸Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ°, Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ readonly
- **Given** paused Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°, **When** Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ½ĞµĞ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ½Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğº, **Then** Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ñ CTA resume
- **Given** paused Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°, **When** Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ°Ğ²Ñ‹Ğº, **Then** Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾
- **Given** paused Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°, **When** Ğ»ÑĞ±Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°, **Then** Ğ±Ğ°Ğ½Ğ½ĞµÑ€ Â«ĞĞ° Ğ¿Ğ°ÑƒĞ·ĞµÂ» Ğ²Ğ¸Ğ´ĞµĞ½
- **Given** paused Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°, **When** Ğ›Ğš, **Then** Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ Ğ²Ğ¸Ğ´ĞµĞ½, ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ resume / cancel

---

## Test Cases

### Unit Tests
- can_access_lesson: paused + completed â†’ true
- can_access_lesson: paused + not started â†’ false
- can_submit_assignment: paused â†’ false
- can_start_new_skill: paused â†’ false

### E2E Tests
- Paused user â†’ completed lesson page â†’ content visible, submit disabled
- Paused user â†’ new lesson â†’ blocked
- Paused user â†’ Ğ›Ğš â†’ progress stats visible

---

## Analytics Events Impacted

- `paused_content_accessed` {user_id, lesson_id, type: "completed_lesson"}
- `paused_content_blocked` {user_id, lesson_id, type: "new_lesson"}
- `paused_resume_cta_clicked` {user_id, source: "content_page" | "lk" | "banner"}
